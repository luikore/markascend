<!DOCTYPE html><html><head><meta charset="utf-8" /><meta content="chrome=1" http-equiv="X-UA-Compatible" /><title>Markascend</title><link href="style.css" rel="stylesheet" /><script src="scale.fix.js"></script><meta content="width=device-width, initial-scale=1, user-scalable=no" name="viewport" /><!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--></head><body><div class="wrapper"><header><h1></h1></header><section><p></p><h1>Compile</h1><pre><code class="highlight"><span class="no">Markascend</span><span class="o">.</span><span class="n">compile</span> <span class="n">src</span><span class="p">,</span> <span class="n">options</span></code></pre><h1>Options</h1><ul><li><code class="highlight"><span class="ss">:autolink</span></code>, default value is <code class="highlight"><span class="sx">%w[http https ftp mailto]</span></code></li><li><code class="highlight"><span class="ss">:inline_img</span></code>, compile image into inlined base64, default = <code class="highlight"><span class="kp">false</span></code></li><li><code class="highlight"><span class="ss">:macros</span></code>, specify the names of enabled macros. Other macros will be treated as plain text. The default value is <code class="highlight"><span class="ss">Markascend</span><span class="p">:</span><span class="ss">:DEFAULT_MACROS</span></code>.</li><li><code class="highlight"><span class="ss">:line_units</span></code>, specify the inline parsers to be used (be careful with the order!). The default value is <code class="highlight"><span class="ss">Markascend</span><span class="p">:</span><span class="ss">:DEFAULT_LINE_UNITS</span></code>.</li><li><code class="highlight"><span class="ss">:sandbox</span></code>, a hybrid option to tweak the syntax to be generally safe for user inputs. <code class="highlight"><span class="kp">false</span></code> by default. When set to <code class="highlight"><span class="kp">true</span></code>, footnotes are disabled, header anchors are ignored, and enabled macros are set to <code class="highlight"><span class="ss">Markascend</span><span class="p">:</span><span class="ss">:SANDBOX_MACROS</span></code>. The sandbox macro list can be overriden by the <code class="highlight"><span class="ss">:macros</span></code> option.</li><li><code class="highlight"><span class="ss">:toc</span></code>, whether generate table of contents. <code class="highlight"><span class="kp">false</span></code> by default. Header anchors can be customized or generated in the form of <code class="highlight"><span class="s2">&quot;-</span><span class="si">#{</span><span class="n">N</span><span class="si">}</span><span class="s2">&quot;</span></code>. Note that there&#39;s no &quot;permalink&quot; generator for headers, but you can implement one with simple javascript.</li></ul><br><h1>Customizing macros</h1><p>More macro processors can be added by</p><pre><code class="highlight"><span class="k">class</span> <span class="nc">Markascend</span><span class="o">::</span><span class="no">Macro</span>
  <span class="k">def</span> <span class="nf">parse_fancy_macro</span>
    <span class="o">.</span><span class="n">.</span><span class="o">.</span> <span class="n">compose</span> <span class="n">result</span> <span class="n">string</span> <span class="ss">with</span><span class="p">:</span> <span class="n">env</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">inline</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre><p>Macro names are limited to names like ruby methods.</p><pre><code class="highlight"><span class="no">Markascend</span><span class="o">.</span><span class="n">compile</span> <span class="n">src</span><span class="p">,</span> <span class="ss">macros</span><span class="p">:</span> <span class="sx">%w[fancy_macro del]</span></code></pre><h1>Customizing line-unit parsers</h1><p>More line-unit parsers can be added by</p><pre><code class="highlight"><span class="k">class</span> <span class="nc">Markascend</span><span class="o">::</span><span class="no">LineUnit</span>
  <span class="k">def</span> <span class="nf">parse_at</span>
    <span class="o">.</span><span class="n">.</span><span class="o">.</span> <span class="n">compose</span> <span class="n">result</span> <span class="n">string</span> <span class="ss">with</span><span class="p">:</span> <span class="n">env</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">block</span><span class="p">,</span> <span class="n">linenum</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre><p>The list of inline parsers can be changed, or reordered</p><pre><code class="highlight"><span class="no">Markascend</span><span class="o">.</span><span class="n">compile</span> <span class="n">src</span><span class="p">,</span> <span class="n">line_units</span><span class="p">:</span> <span class="ss">Markascend</span><span class="p">:</span><span class="ss">:DEFAULT_LINE_UNITS</span> <span class="o">+</span> <span class="sx">%w[at]</span></code></pre><h1>Notes on <code class="highlight"><span class="p">\</span><span class="n">slim</span></code></h1><p>You need to install slim (<code class="highlight">gem ins slim</code>) and require it before using the <code class="highlight">\slim</code> macro:<br></p><pre><code class="highlight"><span class="nb">require</span> <span class="s1">&#39;slim&#39;</span></code></pre><p>It is disabled in sandbox mode.</p><h1>Notes on <code class="highlight"><span class="p">\</span><span class="n">dot</span></code></h1><p>You need to install <a href="graphviz.org">graphviz</a> before using the <code class="highlight">\dot</code> macro.</p><p>It is disabled in sandbox mode.</p><h1>Notes on output format</h1><p>The output is valid HTML5, but not XHTML.</p></section></div></body></html>
