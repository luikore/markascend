<!DOCTYPE html><html><head><meta charset="utf-8" /><meta content="chrome=1" http-equiv="X-UA-Compatible" /><title>Markascend</title><link href="style.css" rel="stylesheet" /><script src="scale.fix.js"></script><meta content="width=device-width, initial-scale=1, user-scalable=no" name="viewport" /><!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--></head><body><div class="wrapper"><header><h1></h1></header><section><h3>Compile</h3><br><pre><code class="hilite"><div class="highlight"><pre><span class="no">Markascend</span><span class="o">.</span><span class="n">compile</span> <span class="n">src</span><span class="p">,</span> <span class="n">options</span>
</pre></div></code></pre><h3>Options</h3><br><ul><li><code class="hilite">:autolink</code>, default value is <code class="hilite">%w[http https ftp mailto]</code></li><li><code class="hilite">:inline_img</code>, compile image into inlined base64, default = <code class="hilite">false</code></li><li><code class="hilite">:macros</code>, the value can be<ul><li><code class="hilite">nil</code>(default), which means using standard macros only.</li><li>An array (unordered) telling the names of enabled macros.</li></ul></li><li><code class="hilite">:line_units</code>, the value can be<ul><li><code class="hilite">nil</code>(default), which means using standard line-unit parsers only.</li><li>An array (ordered) telling the names of enabled parsers.</li></ul></li></ul><p>TODO sandbox options</p><h3>Customizing macros</h3><br><p>More macro processors can be added by</p><pre><code class="hilite"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Markascend</span><span class="o">::</span><span class="no">Macro</span>
  <span class="k">def</span> <span class="nf">parse_fancy_macro</span>
    <span class="o">.</span><span class="n">.</span><span class="o">.</span> <span class="n">compose</span> <span class="n">result</span> <span class="n">string</span> <span class="ss">with</span><span class="p">:</span> <span class="n">env</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">inline</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></code></pre><p>Macro names are limited to names like ruby methods.</p><pre><code class="hilite"><div class="highlight"><pre><span class="no">Markascend</span><span class="o">.</span><span class="n">compile</span> <span class="n">src</span><span class="p">,</span> <span class="ss">macros</span><span class="p">:</span> <span class="sx">%w[fancy_macro del]</span>
</pre></div></code></pre><h3>Customizing line-unit parsers</h3><br><p>More line-unit parsers can be added by</p><pre><code class="hilite"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Markascend</span><span class="o">::</span><span class="no">LineUnit</span>
  <span class="k">def</span> <span class="nf">parse_at</span>
    <span class="o">.</span><span class="n">.</span><span class="o">.</span> <span class="n">compose</span> <span class="n">result</span> <span class="n">string</span> <span class="ss">with</span><span class="p">:</span> <span class="n">env</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">block</span><span class="p">,</span> <span class="n">linenum</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></code></pre><p>The list of inline parsers can be changed, or reordered</p><pre><code class="hilite"><div class="highlight"><pre><span class="no">Markascend</span><span class="o">.</span><span class="n">compile</span> <span class="n">src</span><span class="p">,</span> <span class="n">line_units</span><span class="p">:</span> <span class="ss">Markascend</span><span class="p">:</span><span class="ss">:DEFAULT_LINE_UNITS</span> <span class="o">+</span> <span class="sx">%w[at]</span>
</pre></div></code></pre><h3>Notes on <code class="hilite">\slim</code></h3><br><p>You need to install slim (<code class="hilite">gem ins slim</code>) and require it before using the <code class="hilite">\slim</code> macro:</p><pre><code class="hilite"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">&#39;slim&#39;</span>
</pre></div></code></pre><h3>Notes on <code class="hilite">\dot</code></h3><br><p>You need to install <a href="graphviz.org">graphviz</a> before using the <code class="hilite">\dot</code> macro.</p></section></div></body></html>
